{"ast":null,"code":"import React,{createContext,useEffect}from'react';import{useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";export const ShopContext=/*#__PURE__*/createContext(null);const getDefaultCart=()=>{let cart={};for(let index=0;index<300+1;index++){cart[index]=0;}return cart;};const ShopContextProvider=props=>{const[all_product,setAll_Product]=useState([]);const[cartItems,setCartItems]=useState(getDefaultCart());useEffect(()=>{fetch('http://localhost:4000/allproducts').then(response=>response.json()).then(data=>setAll_Product(data));if(localStorage.getItem('auth-token')){fetch('http://localhost:4000/getcart',{method:'POST',headers:{Accepts:'application/form-data','auth-token':\"\".concat(localStorage.getItem('auth-token')),'Content-Type':'application/json'},body:\"\"}).then(response=>response.json()).then(data=>setCartItems(data));}},[]);const addToCart=itemId=>{setCartItems(prev=>({...prev,[itemId]:prev[itemId]+1}));if(localStorage.getItem('auth-token')){fetch('http://localhost:4000/addtocart',{method:'POST',headers:{Accept:'application/form-data','auth-token':\"\".concat(localStorage.getItem('auth-token')),'Content-Type':'application/json'},body:JSON.stringify({\"itemId\":itemId})}).then(response=>response.json()).then(data=>console.log(data));}};const removeFromCart=itemId=>{setCartItems(prev=>({...prev,[itemId]:prev[itemId]-1}));if(localStorage.getItem('auth-token')){fetch('http://localhost:4000/removefromcart',{method:'POST',headers:{Accept:'application/form-data','auth-token':\"\".concat(localStorage.getItem('auth-token')),'Content-Type':'application/json'},body:JSON.stringify({\"itemId\":itemId})}).then(response=>response.json()).then(data=>console.log(data));}};const getTotalCartAmount=()=>{let totalAmount=0;for(const item in cartItems){if(cartItems[item]>0){let itemInfo=all_product.find(product=>product.id===Number(item));totalAmount+=itemInfo.new_price*cartItems[item];}}return totalAmount;};const getTotalCartItems=()=>{let totalItems=0;for(const item in cartItems){if(cartItems[item]>0){totalItems+=cartItems[item];}}return totalItems;};const contextValue={getTotalCartItems,getTotalCartAmount,all_product,cartItems,addToCart,removeFromCart};return/*#__PURE__*/_jsx(ShopContext.Provider,{value:contextValue,children:props.children});};export default ShopContextProvider;","map":{"version":3,"names":["React","createContext","useEffect","useState","jsx","_jsx","ShopContext","getDefaultCart","cart","index","ShopContextProvider","props","all_product","setAll_Product","cartItems","setCartItems","fetch","then","response","json","data","localStorage","getItem","method","headers","Accepts","concat","body","addToCart","itemId","prev","Accept","JSON","stringify","console","log","removeFromCart","getTotalCartAmount","totalAmount","item","itemInfo","find","product","id","Number","new_price","getTotalCartItems","totalItems","contextValue","Provider","value","children"],"sources":["/Users/subhankar/Desktop/Plantera/frontend/src/Context/ShopContext.jsx"],"sourcesContent":["import React, {createContext, useEffect} from 'react';\nimport {useState} from 'react';\n\nexport const ShopContext = createContext(null);\n\nconst getDefaultCart = ()=>{\n  let cart = {};\n  for(let index = 0; index < 300+1; index++){\n    cart[index] = 0;\n  }\n  return cart;\n}\n\nconst ShopContextProvider = (props) => {\n\n    const [all_product,setAll_Product] = useState([]);\n    const [cartItems,setCartItems] = useState(getDefaultCart());\n    \n    useEffect(()=>{\n        fetch('http://localhost:4000/allproducts')\n        .then((response)=>response.json())\n        .then((data)=>setAll_Product(data))\n\n        if(localStorage.getItem('auth-token')){\n          fetch('http://localhost:4000/getcart',{\n            method:'POST',\n            headers:{\n              Accepts:'application/form-data',\n              'auth-token':`${localStorage.getItem('auth-token')}`,\n              'Content-Type':'application/json',\n            },\n            body:\"\",\n          }).then((response)=>response.json())\n          .then((data)=>setCartItems(data));\n        }\n    },[])\n\n    const addToCart = (itemId) => {\n      setCartItems((prev)=>({...prev,[itemId]:prev[itemId]+1}));\n      if(localStorage.getItem('auth-token')){\n        fetch('http://localhost:4000/addtocart',{\n          method:'POST',\n          headers:{\n            Accept:'application/form-data',\n            'auth-token':`${localStorage.getItem('auth-token')}`,\n            'Content-Type':'application/json',\n          },\n          body:JSON.stringify({\"itemId\":itemId}),\n        })\n        .then((response)=>response.json())\n        .then((data)=>console.log(data));\n      }\n    }\n\n    const removeFromCart = (itemId) =>{\n      setCartItems((prev)=>({...prev,[itemId]:prev[itemId]-1}));\n      if(localStorage.getItem('auth-token')){\n        fetch('http://localhost:4000/removefromcart',{\n          method:'POST',\n          headers:{\n            Accept:'application/form-data',\n            'auth-token':`${localStorage.getItem('auth-token')}`,\n            'Content-Type':'application/json',\n          },\n          body:JSON.stringify({\"itemId\":itemId}),\n        })\n        .then((response)=>response.json())\n        .then((data)=>console.log(data));\n      }\n    }\n\n    const getTotalCartAmount = () => {\n      let totalAmount = 0;\n      for(const item in cartItems){\n        if(cartItems[item]>0){\n          let itemInfo = all_product.find((product)=>product.id===Number(item))\n          totalAmount += itemInfo.new_price * cartItems[item];\n        }\n      }\n      return totalAmount;\n    }\n\n    const getTotalCartItems = ()=>{\n      let totalItems = 0;\n      for(const item in cartItems){\n        if(cartItems[item]>0){\n          totalItems += cartItems[item];\n        }\n      }\n      return totalItems;\n    }\n\n    const contextValue = {getTotalCartItems,getTotalCartAmount,all_product,cartItems,addToCart,removeFromCart};\n\n    return (\n      <ShopContext.Provider value={contextValue}>\n            {props.children}\n      </ShopContext.Provider>\n    )\n  }\n\n  export default ShopContextProvider;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}